// 1. Asenkron fonksiyon ile API'den veri çekme
async function fetchUsers() {
  try {
    const response = await fetch('https://jsonplaceholder.typicode.com/users');
    if (!response.ok) throw new Error(`HTTP error! status: ${response.status}`);
    const users = await response.json();
    return users;
  } catch (error) {
    console.error('Veri çekme hatası:', error);
    return [];
  }
}

// 2. Fonksiyonel programlama yöntemleri: map, filter, reduce
function processUsers(users) {
  // İsimleri büyük harfe çevir
  const names = users.map(user => user.name.toUpperCase());

  // Şehir İstanbul olan kullanıcıları filtrele
  const istanbulUsers = users.filter(user => user.address.city === 'Istanbul');

  // Kullanıcı sayısını say
  const userCount = users.reduce((count, _) => count + 1, 0);

  return { names, istanbulUsers, userCount };
}

// 3. Ana fonksiyon: Veriyi çek, işle ve sonucu konsola yazdır
async function main() {
  const users = await fetchUsers();
  const result = processUsers(users);

  console.log('Bütün İsimler:', result.names);
  console.log('İstanbul’daki Kullanıcılar:', result.istanbulUsers);
  console.log('Toplam Kullanıcı Sayısı:', result.userCount);
}

// Fonksiyonu çağır
main();

/*
Neler Gösteriyor?

Async/Await: Asenkron API çağrısını okunabilir ve yönetilebilir şekilde yapıyoruz.

Fetch API: Modern JavaScript ile web API’lerine bağlanma.

Hata Yönetimi: try/catch ile hata kontrolü.

Map: Dizi elemanları üzerinde dönüşüm yapma.

Filter: Belirli koşullara göre eleman seçme.

Reduce: Dizideki verileri tek bir değere indirgeme.

Template literals, arrow functions: Modern JS sözdizimi kullanımı.
*/
